---

title: Chatbot Interface

keywords: fastai
sidebar: home_sidebar

summary: "Implements the question-answering chatbot"
description: "Implements the question-answering chatbot"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/03_chatbot.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ChatBot" class="doc_header"><code>class</code> <code>ChatBot</code><a href="https://github.com/kikejimenez/let_me_answer_for_you/tree/master/let_me_answer_for_you/chatbot.py#L26" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ChatBot</code>(<strong><code>context_data_file</code></strong>=<em><code>None</code></em>, <strong><code>faq_data_file</code></strong>=<em><code>None</code></em>, <strong><code>configs_faq</code></strong>=<em><code>None</code></em>, <strong><code>download_models</code></strong>=<em><code>True</code></em>) :: <a href="/let_me_answer_for_you/dialog_system#DialogSystem"><code>DialogSystem</code></a></p>
</blockquote>
<p>This Bots implements the <a href="/let_me_answer_for_you/dialog_system#DialogSystem"><code>DialogSystem</code></a> class methods as a form of conversation in
a text interface.</p>
<p>The Bot starts asking to introduce the desired question and returns a set of answers,
After this, asks if a better answer will be provided, if yes, asks for the type of answer
(context or FAQ), if not, starts again.</p>
<p>The chatbot stops by calling the method chatbot() of an instance of the class.</p>

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ChatBot.are_answers_ok" class="doc_header"><code>ChatBot.are_answers_ok</code><a href="https://github.com/kikejimenez/let_me_answer_for_you/tree/master/let_me_answer_for_you/chatbot.py#L87" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>ChatBot.are_answers_ok</code>()</p>
</blockquote>
<p>Asks if a better answer will be provided</p>

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ChatBot.chatbot" class="doc_header"><code>ChatBot.chatbot</code><a href="https://github.com/kikejimenez/let_me_answer_for_you/tree/master/let_me_answer_for_you/chatbot.py#L103" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>ChatBot.chatbot</code>()</p>
</blockquote>
<p>Chatbots logic:</p>
<p>Asks for a question -&gt; Gives responses -&gt; Asks if a better answer will be provided</p>
<p>If not starts again.</p>
<p>If yes -&gt; asks if it is a context or a FAQ -&gt; asks for the response and updates the data -&gt; starts again.</p>
<p>The chatbot stops at any moment with the keys Ctrl+C</p>

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ChatBot.is_equal" class="doc_header"><code>ChatBot.is_equal</code><a href="https://github.com/kikejimenez/let_me_answer_for_you/tree/master/let_me_answer_for_you/chatbot.py#L48" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>ChatBot.is_equal</code>(<strong><code>string</code></strong>, <strong><code>letter</code></strong>=<em><code>'y'</code></em>)</p>
</blockquote>
<p>Open I/O input until response is 'yes' or 'no'</p>

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="DialogSystem.new_context" class="doc_header"><code>DialogSystem.new_context</code><a href="https://github.com/kikejimenez/let_me_answer_for_you/tree/master/let_me_answer_for_you/dialog_system.py#L103" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>DialogSystem.new_context</code>(<strong><code>topic</code></strong>, <strong><code>context</code></strong>)</p>
</blockquote>
<p>Adds a new context.</p>
<p>INPUT:</p>
<ul>
<li>topic (The title of the context)</li>
<li>context</li>
</ul>
<p>The new context is stored in the path <em>self.data['context']['path']</em></p>

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ChatBot.new_context_interface" class="doc_header"><code>ChatBot.new_context_interface</code><a href="https://github.com/kikejimenez/let_me_answer_for_you/tree/master/let_me_answer_for_you/chatbot.py#L79" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>ChatBot.new_context_interface</code>()</p>
</blockquote>
<p>Asks for a new context</p>

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="DialogSystem.new_question_answer" class="doc_header"><code>DialogSystem.new_question_answer</code><a href="https://github.com/kikejimenez/let_me_answer_for_you/tree/master/let_me_answer_for_you/dialog_system.py#L82" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>DialogSystem.new_question_answer</code>(<strong><code>question</code></strong>, <strong><code>answer</code></strong>)</p>
</blockquote>
<p>Adds a new question-answer pair.</p>
<p>INPUT:</p>
<ul>
<li><p>question</p>
</li>
<li><p>answer</p>
</li>
</ul>
<p>The new question-answer pair is stored in the path <em>self.data['faq']['path']</em>
and models stored in <em>qa_models['faq']</em> get re-trained by calling the function
<code>train_model</code> of the <code>deeppavlov</code> library</p>

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ChatBot.new_question_answer_interface" class="doc_header"><code>ChatBot.new_question_answer_interface</code><a href="https://github.com/kikejimenez/let_me_answer_for_you/tree/master/let_me_answer_for_you/chatbot.py#L69" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>ChatBot.new_question_answer_interface</code>()</p>
</blockquote>
<p>Asks for  a new question-answer pair</p>

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="DialogSystem.question_answer" class="doc_header"><code>DialogSystem.question_answer</code><a href="https://github.com/kikejimenez/let_me_answer_for_you/tree/master/let_me_answer_for_you/dialog_system.py#L60" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>DialogSystem.question_answer</code>(<strong><code>question</code></strong>)</p>
</blockquote>
<p>Gets answers to a question.</p>
<p>INPUT:</p>
<ul>
<li><em>question</em> parameter </li>
</ul>
<p>The method creates the following attributes:</p>
<ul>
<li><p>'self.question' -&gt; the question parameter</p>
</li>
<li><p>'self.responses' -&gt; a dict of possible responses</p>
</li>
<li><p>'self.formatted_responses' -&gt; a formatted string of the possible responses</p>
</li>
</ul>
<p>This method calls the functions <code>get_response</code> and 'format_responses' of the 'settings' module</p>

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ChatBot.question_answer_interface" class="doc_header"><code>ChatBot.question_answer_interface</code><a href="https://github.com/kikejimenez/let_me_answer_for_you/tree/master/let_me_answer_for_you/chatbot.py#L62" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>ChatBot.question_answer_interface</code>()</p>
</blockquote>
<p>Gets 'self.formatted_responses' in 'print' function</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">cb</span> <span class="o">=</span> <span class="n">ChatBot</span><span class="p">(</span>
    <span class="n">faq_data_file</span><span class="o">=</span><span class="s1">&#39;./faq_example.csv&#39;</span><span class="p">,</span>
    <span class="n">context_data_file</span><span class="o">=</span><span class="s1">&#39;./context_example.csv&#39;</span><span class="p">,</span>
    <span class="n">download_models</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>[nltk_data] Downloading package punkt to /home/jovyan/nltk_data...
[nltk_data]   Package punkt is already up-to-date!
[nltk_data] Downloading package stopwords to /home/jovyan/nltk_data...
[nltk_data]   Package stopwords is already up-to-date!
[nltk_data] Downloading package perluniprops to
[nltk_data]     /home/jovyan/nltk_data...
[nltk_data]   Package perluniprops is already up-to-date!
[nltk_data] Downloading package nonbreaking_prefixes to
[nltk_data]     /home/jovyan/nltk_data...
[nltk_data]   Package nonbreaking_prefixes is already up-to-date!
/opt/conda/lib/python3.7/site-packages/sklearn/linear_model/logistic.py:432: FutureWarning: Default solver will be changed to &#39;lbfgs&#39; in 0.22. Specify a solver to silence this warning.
  FutureWarning)
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">cb</span><span class="o">.</span><span class="n">chatbot</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>
 Welcome to the Chatbot. To exit press Ctrl+C.

</pre>
</div>
</div>

<div class="output_area">


</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>what is spacex?:

1: To populate the FAQ data file
2: launch vehicles
3: the Starlink satellite constellation

</pre>
</div>
</div>

<div class="output_area">


</div>

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>/opt/conda/lib/python3.7/site-packages/sklearn/linear_model/logistic.py:432: FutureWarning: Default solver will be changed to &#39;lbfgs&#39; in 0.22. Specify a solver to silence this warning.
  FutureWarning)
/opt/conda/lib/python3.7/site-packages/sklearn/linear_model/logistic.py:469: FutureWarning: Default multi_class will be changed to &#39;auto&#39; in 0.22. Specify the multi_class option to silence this warning.
  &#34;this warning.&#34;, FutureWarning)
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>The bot has been updated. 


 Welcome to the Chatbot. To exit press Ctrl+C.

</pre>
</div>
</div>

<div class="output_area">


</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>what is spaceX?:

1: Is spaceflight company
2: several launch vehicles, the Starlink satellite constellation
3: developed several launch vehicles

</pre>
</div>
</div>

<div class="output_area">


</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>The bot has been updated. 


 Welcome to the Chatbot. To exit press Ctrl+C.

</pre>
</div>
</div>

<div class="output_area">


</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>?:

1: SpaceX
2: This is the Intekglobal Dialog System
3: What

</pre>
</div>
</div>

<div class="output_area">


</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>The bot has been updated. 


 Welcome to the Chatbot. To exit press Ctrl+C.

</pre>
</div>
</div>

<div class="output_area">


</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>What is SpaceX?:

1: Is spaceflight company
2: first privately funded liquid-propellant rocket to reach orbit
3: What


 See you!

</pre>
</div>
</div>

<div class="output_area">


</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

